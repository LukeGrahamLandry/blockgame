<html>
<head>
    <style>
        canvas:focus {
            outline: none;
        }
        body {
            padding: 0;
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
<div id="game"></div>
<div id="info">
    <button id="start"> Start Game </button> <span style="color: red"> <-- click me </span> <br>
<div>

<script src="./generated/runtime.js"></script>  <!-- For transpiled lua code. -->
<script src="./generated/compiled.lua.js"></script>  <!-- Lua game logic -->
<script type="module">
    import init from "./generated/blockgame.js";
    const btn = document.getElementById("start");
    btn.addEventListener("click", () => {
        document.getElementById("info").remove();
        init().then((wasm) => window.wasm = wasm);  // Stick the exports in a global so the lua logic can access them.
        // TODO: more resilient system. do this from rust?
        setTimeout(() => {
            document.getElementById("game").children[0].focus();
        }, 500);  // Wait for winit to grab the canvas? IDK but keyboard input doesn't work without this.
    });
</script>
</body>
</html>
